<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF & Image Viewer</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
      min-height: 100vh;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(6, 182, 212, 0.15) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
      padding: 20px;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .subtitle {
      font-size: 1.1em;
      opacity: 0.95;
      font-weight: 400;
      letter-spacing: 0.3px;
    }

    .search-box {
      background: white;
      border-radius: 16px;
      padding: 16px 26px;
      margin-bottom: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.8);
    }

    .search-box:focus-within {
      box-shadow: 0 15px 50px rgba(0,0,0,0.2);
      transform: translateY(-2px);
    }

    .search-box input {
      border: none;
      outline: none;
      flex: 1;
      font-size: 1.05em;
      padding: 5px;
      color: #1e293b;
      font-weight: 400;
    }

    .search-box input::placeholder {
      color: #94a3b8;
    }

    .search-box svg {
      width: 22px;
      height: 22px;
      color: #3b82f6;
      margin-right: 12px;
    }

    .filter-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .filter-tab {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.2);
      padding: 10px 22px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95em;
      font-weight: 600;
      letter-spacing: 0.3px;
    }

    .filter-tab:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .filter-tab.active {
      background: white;
      color: #1e3a8a;
      border-color: white;
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }

    .files-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      margin-top: 20px;
    }

    .file-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      display: block;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .file-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      border-color: rgba(59, 130, 246, 0.3);
    }

    .file-icon {
      height: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      position: relative;
      overflow: hidden;
    }

    .file-icon::before {
      content: '';
      position: absolute;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      transition: all 0.5s ease;
    }

    .file-card:hover .file-icon::before {
      transform: translateX(100%) rotate(45deg);
    }

    .file-icon svg {
      width: 80px;
      height: 80px;
      color: white;
      opacity: 0.95;
      position: relative;
      z-index: 1;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    .file-icon img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .file-info {
      padding: 20px;
      background: white;
    }

    .file-name {
      font-weight: 600;
      font-size: 1.05em;
      margin-bottom: 10px;
      color: #1e293b;
      word-wrap: break-word;
      line-height: 1.4;
    }

    .file-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.9em;
      color: #64748b;
    }

    .file-type {
      background: #f1f5f9;
      color: #475569;
      padding: 5px 12px;
      border-radius: 8px;
      font-size: 0.8em;
      text-transform: uppercase;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .loading {
      text-align: center;
      color: white;
      font-size: 1.2em;
      padding: 40px;
    }

    .no-files {
      text-align: center;
      color: white;
      font-size: 1.2em;
      padding: 40px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      margin-top: 20px;
    }

    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      padding: 20px 25px;
      border-radius: 16px;
      flex: 1;
      min-width: 150px;
      text-align: center;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }

    .stat-value {
      font-size: 2.5em;
      font-weight: 700;
      margin-bottom: 5px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .stat-label {
      font-size: 0.9em;
      opacity: 0.95;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 1.8em;
      }

      .files-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸ“š PDF & Image Viewer</h1>
      <p class="subtitle">Browse and view your documents and images</p>
    </header>

    <div class="search-box">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
      <input type="text" id="searchInput" placeholder="Search files..." />
    </div>

    <div class="stats" id="stats" style="display: none;">
      <div class="stat-card">
        <div class="stat-value" id="totalFiles">0</div>
        <div class="stat-label">Total Files</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="pdfCount">0</div>
        <div class="stat-label">PDFs</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="imageCount">0</div>
        <div class="stat-label">Images</div>
      </div>
    </div>

    <div class="filter-tabs">
      <button class="filter-tab active" data-filter="all">All Files</button>
      <button class="filter-tab" data-filter="pdf">PDFs Only</button>
      <button class="filter-tab" data-filter="image">Images Only</button>
    </div>

    <div id="filesList">
      <div class="loading">Loading files...</div>
    </div>
  </div>

  <script>
    let allFiles = [];
    let currentFilter = 'all';

    // Load files from files.json manifest
    async function loadFiles() {
      try {
        const response = await fetch('files.json');
        if (!response.ok) {
          if (response.status === 404) {
            throw new Error('files.json not found');
          }
          throw new Error('Failed to load files.json');
        }
        allFiles = await response.json();
        updateStats();
        displayFiles(allFiles);
      } catch (error) {
        console.error('Error loading files:', error);
        const message = error.message === 'files.json not found' 
          ? 'files.json not found. Please create it with your file list.'
          : 'Error loading files. Please check files.json exists and is valid JSON.';
        document.getElementById('filesList').innerHTML = 
          `<div class="no-files">${message}</div>`;
      }
    }

    // Update statistics
    function updateStats() {
      const pdfCount = allFiles.filter(f => f.type === 'pdf').length;
      const imageCount = allFiles.filter(f => f.type === 'image').length;
      
      document.getElementById('totalFiles').textContent = allFiles.length;
      document.getElementById('pdfCount').textContent = pdfCount;
      document.getElementById('imageCount').textContent = imageCount;
      document.getElementById('stats').style.display = allFiles.length > 0 ? 'flex' : 'none';
    }

    // Display files
    function displayFiles(files) {
      const filesList = document.getElementById('filesList');
      
      if (files.length === 0) {
        filesList.innerHTML = '<div class="no-files">No files found. Add files to the PDFs folder and update files.json</div>';
        return;
      }

      const grid = document.createElement('div');
      grid.className = 'files-grid';

      files.forEach(file => {
        const card = document.createElement('a');
        card.className = 'file-card';
        card.href = `viewer.html?file=${encodeURIComponent(file.path)}`;

        const icon = document.createElement('div');
        icon.className = 'file-icon';

        if (file.type === 'pdf') {
          icon.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
            </svg>
          `;
        } else {
          const img = document.createElement('img');
          img.src = file.path;
          img.alt = file.name;
          img.loading = 'lazy'; // Lazy load images for better performance
          icon.appendChild(img);
        }

        const info = document.createElement('div');
        info.className = 'file-info';

        const name = document.createElement('div');
        name.className = 'file-name';
        name.textContent = file.name;

        const meta = document.createElement('div');
        meta.className = 'file-meta';

        const type = document.createElement('span');
        type.className = 'file-type';
        type.textContent = file.type;

        meta.appendChild(type);

        info.appendChild(name);
        info.appendChild(meta);

        card.appendChild(icon);
        card.appendChild(info);
        grid.appendChild(card);
      });

      filesList.innerHTML = '';
      filesList.appendChild(grid);
    }

    // Filter files
    function filterFiles() {
      let filtered = allFiles;

      // Apply type filter
      if (currentFilter !== 'all') {
        filtered = filtered.filter(f => f.type === currentFilter);
      }

      // Apply search filter
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      if (searchTerm) {
        filtered = filtered.filter(f => f.name.toLowerCase().includes(searchTerm));
      }

      displayFiles(filtered);
    }

    // Event listeners
    document.querySelectorAll('.filter-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentFilter = tab.dataset.filter;
        filterFiles();
      });
    });

    document.getElementById('searchInput').addEventListener('input', filterFiles);

    // Load files on page load
    loadFiles();
  </script>
</body>
</html>
